webpackJsonp([1],{20:function(t,e,n){"use strict";var a=n(8),s=n(93),o=n(81),c=n.n(o),i=n(80),r=n.n(i),u=n(82),l=n.n(u);a.a.use(s.a),e.a=new s.a({routes:[{path:"/",name:"main",component:l.a,children:[{path:"/add",name:"add",component:c.a},{path:"/",name:"display",component:r.a}]}]})},21:function(t,e){},23:function(t,e,n){function a(t){n(75)}var s=n(1)(n(41),n(89),a,null,null);t.exports=s.exports},41:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"app"}},42:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(15),s=n.n(a),o=n(19),c=n.n(o),i=n(9),r=n.n(i);e.default={name:"add-new",components:{Multiselect:c.a},data:function(){return{temp:r.a,constituencies:[],constituency:{id:0,name:"Not Selected"},constituencyTotalVotes:null,constituencyCandidates:[]}},methods:{calculateVotePercentage:function(t){return null===t.votes?"No votes":t.votes/this.constituencyTotalVotes*100+"%"}},mounted:function(){var t=this;r.a.get("https://mapit.mysociety.org/areas/WMC").then(function(e){var n=e.data;s()(n).forEach(function(e){return t.constituencies.push(n[e])})})},watch:{constituency:function(t){var e=this,n="https://dev-ge.staging.dmao.org/constituency/"+t.codes.gss+"/candidates",a="https://dev-ge.staging.dmao.org/constituency/"+t.codes.gss+"/votes";r.a.get(n).then(function(t){e.constituencyCandidates=t.data.candidates,r.a.get(a).then(function(t){e.constituencyTotalVotes=t.data.data.totalVotes,e.constituencyCandidates.forEach(function(n){n.votes=t.data.data.votes[n.id],n.votePercentage=e.calculateVotePercentage(n)}),e.constituencyCandidates.sort(function(t,e){return e.votes-t.votes})}).catch(function(t){return console.log(t)})}).catch(function(){return alert("Error retrieving candidates for "+e.constituency.name)})},constituencyCandidates:function(t){var e=this;t.forEach(function(t){t.votePercentage=e.calculateVotePercentage(t)}),this.constituencyCandidates=t}}}},43:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(15),s=n.n(a),o=n(19),c=n.n(o),i=n(9),r=n.n(i);e.default={name:"add-new",components:{Multiselect:c.a},data:function(){return{temp:r.a,constituencies:[],constituency:{id:0,name:"Not Selected"},constituencyTotalVotes:null,constituencyCandidates:[]}},methods:{calculateVotePercentage:function(t){return null===t.votes?"No votes":t.votes/this.constituencyTotalVotes*100+"%"},updateVotes:function(){var t=this,e={};this.constituencyCandidates.forEach(function(t){e[t.id]=t.votes});var n={constituency:{id:this.constituency.id,totalVotes:this.constituencyTotalVotes,votes:e}},a="https://dev-ge.staging.dmao.org/constituency/"+this.constituency.codes.gss+"/votes";r.a.post(a,n).then(function(e){var n=e.data.data;t.constituencyTotalVotes=n.totalVotes,t.constituencyCandidates.forEach(function(e){e.votes=n.votes[e.id],e.votePercentage=t.calculateVotePercentage(e)}),t.constituencyCandidates.sort(function(t,e){return e.votes-t.votes})}).catch(function(t){return console.log(t)})}},mounted:function(){var t=this;r.a.get("https://mapit.mysociety.org/areas/WMC").then(function(e){var n=e.data;s()(n).forEach(function(e){return t.constituencies.push(n[e])})})},watch:{constituency:function(t){var e=this,n="https://dev-ge.staging.dmao.org/constituency/"+t.codes.gss+"/candidates",a="https://dev-ge.staging.dmao.org/constituency/"+t.codes.gss+"/votes";r.a.get(n).then(function(t){e.constituencyCandidates=t.data.candidates,r.a.get(a).then(function(t){e.constituencyTotalVotes=t.data.data.totalVotes,e.constituencyCandidates.forEach(function(n){n.votes=t.data.data.votes[n.id],n.votePercentage=e.calculateVotePercentage(n)}),e.constituencyCandidates.sort(function(t,e){return e.votes-t.votes})}).catch(function(t){return console.log(t)})}).catch(function(){return alert("Error retrieving candidates for "+e.constituency.name)})},constituencyCandidates:function(t){var e=this;t.forEach(function(t){t.votePercentage=e.calculateVotePercentage(t)}),this.constituencyCandidates=t}}}},44:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(84),s=n.n(a),o=n(85),c=n.n(o),i=n(83),r=n.n(i);e.default={name:"app",components:{AppHeader:s.a,AppSidebar:c.a,AppFooter:r.a}}},45:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"app-footer"}},46:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"app-header",data:function(){return{}},computed:{}}},47:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"app-sidebar",components:{}}},48:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(8),s=n(23),o=n.n(s),c=n(20),i=n(22),r=n.n(i),u=n(21);n.n(u);a.a.config.productionTip=!1,a.a.use(r.a),new a.a({el:"#app",router:c.a,template:"<App/>",components:{App:o.a}})},75:function(t,e){},76:function(t,e){},77:function(t,e){},80:function(t,e,n){function a(t){n(76)}var s=n(1)(n(42),n(90),a,null,null);t.exports=s.exports},81:function(t,e,n){function a(t){n(77)}var s=n(1)(n(43),n(92),a,null,null);t.exports=s.exports},82:function(t,e,n){var a=n(1)(n(44),n(86),null,null,null);t.exports=a.exports},83:function(t,e,n){var a=n(1)(n(45),n(88),null,null,null);t.exports=a.exports},84:function(t,e,n){var a=n(1)(n(46),n(91),null,null,null);t.exports=a.exports},85:function(t,e,n){var a=n(1)(n(47),n(87),null,null,null);t.exports=a.exports},86:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("maApp",{attrs:{fixedSidebar:!0,fixedFooter:!0}},[n("AppHeader"),t._v(" "),n("AppSidebar"),t._v(" "),n("article",{staticClass:"content"},[n("router-view")],1),t._v(" "),n("AppFooter")],1)},staticRenderFns:[]}},87:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("maSidebar",[n("maSidebarHeader",{attrs:{appName:"NaSTA Election Results"}}),t._v(" "),n("maSidebarNav"),t._v(" "),n("maSidebarFooter")],1)},staticRenderFns:[]}},88:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("maFooter",[n("maFooterButtons"),t._v(" "),n("maFooterAbout",[n("maFooterAboutItem")],1)],1)},staticRenderFns:[]}},89:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("router-view")},staticRenderFns:[]}},90:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"title-block"},[n("div",{staticClass:"col-xs-12 col-sm-12 col-lg-9 col-xl-9 request-header"},[n("h3",{staticClass:"title"},[t._v("Constituency Voter Count - "+t._s(t.constituency.name))])])]),t._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"col-sm-12 form-group"},[n("multiselect",{attrs:{placeholder:"Select Constituency",options:t.constituencies,"track-by":"id",label:"name","allow-empty":!1},model:{value:t.constituency,callback:function(e){t.constituency=e},expression:"constituency"}})],1)]),t._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"col-sm-12"},[0!=t.constituencyCandidates.length&&t.constituencyTotalVotes?n("h2",{staticClass:"text-xs-center"},[t._v("Seat Won By: "+t._s(t.constituencyCandidates[0].name)+", "+t._s(t.constituencyCandidates[0].party))]):t._e()]),t._v(" "),n("div",{staticClass:"col-sm-12"},[n("div",{staticClass:"form-group"},[n("h4",{staticClass:"text-xs-center"},[t._v("Total votes cast in constituency: "+t._s(t.constituencyTotalVotes))])])]),t._v(" "),n("div",{staticClass:"col-sm-12"},[n("table",{staticClass:"table table-striped"},[t._m(0),t._v(" "),n("tbody",t._l(t.constituencyCandidates,function(e){return n("tr",{attrs:{"track-by":"id"}},[n("th",{attrs:{scope:"row"}},[t._v(t._s(e.name))]),t._v(" "),n("td",[t._v(t._s(e.party))]),t._v(" "),n("td",[t._v(t._s(e.votes))]),t._v(" "),n("td",[t._v(t._s(e.votePercentage))])])}))])])])])},staticRenderFns:[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",[n("tr",[n("th",[t._v("Candidate Name")]),t._v(" "),n("th",[t._v("Party")]),t._v(" "),n("th",[t._v("Votes")]),t._v(" "),n("th",[t._v("% of Votes")])])])}]}},91:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("maAppHeader",[n("maAppHeaderHideSidebar"),t._v(" "),n("maHeaderNav")],1)},staticRenderFns:[]}},92:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"title-block"},[n("div",{staticClass:"col-xs-12 col-sm-12 col-lg-9 col-xl-9 request-header"},[n("h3",{staticClass:"title"},[t._v("Constituency Voter Count - "+t._s(t.constituency.name))])])]),t._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"col-sm-12 form-group"},[n("multiselect",{attrs:{placeholder:"Select Constituency",options:t.constituencies,"track-by":"id",label:"name","allow-empty":!1},model:{value:t.constituency,callback:function(e){t.constituency=e},expression:"constituency"}})],1)]),t._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"col-sm-12"},[0!=t.constituencyCandidates.length&&t.constituencyTotalVotes?n("h2",{staticClass:"text-xs-center"},[t._v("Seat Won By: "+t._s(t.constituencyCandidates[0].name)+", "+t._s(t.constituencyCandidates[0].party))]):t._e()]),t._v(" "),n("div",{staticClass:"col-sm-12"},[n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"totalVotes"}},[t._v("Total Votes Cast")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.constituencyTotalVotes,expression:"constituencyTotalVotes"}],staticClass:"form-control",attrs:{type:"text",id:"totalVotes",placeholder:"Total votes cast for constituency"},domProps:{value:t.constituencyTotalVotes},on:{input:function(e){e.target.composing||(t.constituencyTotalVotes=e.target.value)}}})])]),t._v(" "),n("div",{staticClass:"col-sm-12"},[n("table",{staticClass:"table table-striped"},[t._m(0),t._v(" "),n("tbody",t._l(t.constituencyCandidates,function(e){return n("tr",{attrs:{"track-by":"id"}},[n("th",{attrs:{scope:"row"}},[t._v(t._s(e.name))]),t._v(" "),n("td",[t._v(t._s(e.party))]),t._v(" "),n("td",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.votes,expression:"candidate.votes"}],attrs:{type:"text",id:e.id+"_votes"},domProps:{value:e.votes},on:{input:function(t){t.target.composing||(e.votes=t.target.value)}}})]),t._v(" "),n("td",[t._v(t._s(e.votePercentage))])])}))])]),t._v(" "),n("div",{staticClass:"col-sm-12"},[n("button",{staticClass:"btn btn-primary pull-right",on:{click:function(e){e.stopPropagation(),e.preventDefault(),t.updateVotes(e)}}},[t._v("Store Votes")])])])])},staticRenderFns:[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",[n("tr",[n("th",[t._v("Candidate Name")]),t._v(" "),n("th",[t._v("Party")]),t._v(" "),n("th",[t._v("Votes")]),t._v(" "),n("th",[t._v("% of Votes")])])])}]}}},[48]);
//# sourceMappingURL=app.4aa25bd333697e4bf33e.js.map